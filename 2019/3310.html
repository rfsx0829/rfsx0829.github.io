<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="åˆæ¢ Kubernetesï¼ˆä¸€ï¼‰"><meta name="keywords" content="Kubernetes,æ–°å¼€å§‹"><meta name="author" content="Guu Zeng,rfsx0829@163.com"><meta name="copyright" content="Guu Zeng"><title>åˆæ¢ Kubernetesï¼ˆä¸€ï¼‰ | Guu's Blog</title><link rel="shortcut icon" href="/favicon.png"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="åˆ‡æ¢æ–‡ç« è¯¦æƒ…">åˆ‡æ¢ç«™ç‚¹æ¦‚è§ˆ</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#è®°å½•åˆæ¢-Kubernetes-çš„è¿‡ç¨‹"><span class="toc-number">1.</span> <span class="toc-text">è®°å½•åˆæ¢ Kubernetes çš„è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç®€ä»‹"><span class="toc-number">1.1.</span> <span class="toc-text">ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®‰è£…"><span class="toc-number">1.2.</span> <span class="toc-text">å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VirtualBox"><span class="toc-number">1.2.1.</span> <span class="toc-text">VirtualBox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Minikube"><span class="toc-number">1.2.2.</span> <span class="toc-text">Minikube</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kubectl"><span class="toc-number">1.2.3.</span> <span class="toc-text">Kubectl</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯åŠ¨"><span class="toc-number">1.3.</span> <span class="toc-text">å¯åŠ¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†™ä¸€ä¸ªå°æœåŠ¡ï¼Œå°è¯•éƒ¨ç½²"><span class="toc-number">1.4.</span> <span class="toc-text">å†™ä¸€ä¸ªå°æœåŠ¡ï¼Œå°è¯•éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Hello-World-ä»£ç "><span class="toc-number">1.4.1.</span> <span class="toc-text">Hello World ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é™æ€ç¼–è¯‘"><span class="toc-number">1.4.2.</span> <span class="toc-text">é™æ€ç¼–è¯‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„å»º-Docker-é•œåƒ"><span class="toc-number">1.4.3.</span> <span class="toc-text">æ„å»º Docker é•œåƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#éƒ¨ç½²"><span class="toc-number">1.4.4.</span> <span class="toc-text">éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆ›å»º-Deployments-å’Œ-Pods"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">åˆ›å»º Deployments å’Œ Pods</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆ›å»º-Service-ä»¥ä¾›å¤–éƒ¨è®¿é—®"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">åˆ›å»º Service ä»¥ä¾›å¤–éƒ¨è®¿é—®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å°ç»“"><span class="toc-number">1.5.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.gif"></div><div class="author-info__name text-center">Guu Zeng</div><div class="author-info__description text-center">â†‘ åªä¼šå†™ HelloWorld</div><div class="follow-button"><a href="https://github.com/rfsx0829">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">æ–‡ç« </span><span class="pull-right">17</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">æ ‡ç­¾</span><span class="pull-right">23</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">åˆ†ç±»</span><span class="pull-right">11</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://bugzeng.com">bugzeng</a><a class="author-info-links__name text-center" href="https://yhyddr.github.io">abser</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/top.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Guu's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> æœç´¢</span></a><a class="site-page" href="/">ä¸»é¡µ</a><a class="site-page" href="/archives">å½’æ¡£</a><a class="site-page" href="/tags">æ ‡ç­¾</a><a class="site-page" href="/categories">åˆ†ç±»</a><a class="site-page" href="/about">å…³äº</a></span></div><div id="post-info"><div id="post-title">åˆæ¢ Kubernetesï¼ˆä¸€ï¼‰</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-03-31</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Kubernetes/">Kubernetes</a><div class="post-meta-wordcount"><span>å­—æ•°æ€»è®¡: </span><span class="word-count">1.3k</span><span class="post-meta__separator">|</span><span>é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="è®°å½•åˆæ¢-Kubernetes-çš„è¿‡ç¨‹"><a href="#è®°å½•åˆæ¢-Kubernetes-çš„è¿‡ç¨‹" class="headerlink" title="è®°å½•åˆæ¢ Kubernetes çš„è¿‡ç¨‹"></a>è®°å½•åˆæ¢ Kubernetes çš„è¿‡ç¨‹</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä¸€ç›´æœ‰æƒ³å­¦ä¹  Kubernetes ï¼Œæœ€è¿‘çœ‹äº†äº›ä¹¦ï¼Œä¹Ÿè‡ªå·±ç”¨äº†ç”¨ï¼Œä¹Ÿé‡åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼Œå€¼å¾—å†™ç¯‡åšå®¢è®°å½•ä¸€ä¸‹</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ç”±äºç¬”è€…ä»…æ˜¯è‡ªå­¦å¦‚ä½•ä½¿ç”¨ Kubernetesï¼Œä»…æ˜¯å•æœºç‰ˆï¼Œè¿˜æœªåˆ°éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™ï¼Œä¸”ä½¿ç”¨çš„æ˜¯ Mac ç”µè„‘ï¼Œæ•…é€‰æ‹©ä½¿ç”¨ Minikube</p>
<p>è¦å®‰è£…ä½¿ç”¨ Minikube ï¼Œéœ€è¦å…ˆå®‰è£… VirtualBox ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›è¿‡ç¨‹</p>
<a id="more"></a>
<h3 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h3><p><a href="https://www.virtualbox.org" target="_blank" rel="noopener">VirtualBoxå®˜ç½‘</a> æä¾›äº†ä¸‹è½½ï¼Œæˆ–è€…å¯ä»¥åˆ° <a href="https://mirrors.tuna.tsinghua.edu.cn/virtualbox/" target="_blank" rel="noopener">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</a> ä¸‹è½½</p>
<p>ä¸‹è½½å®Œæˆä¹‹åï¼Œæ‰“å¼€å®‰è£…åŒ…å®‰è£…å³å¯</p>
<h3 id="Minikube"><a href="#Minikube" class="headerlink" title="Minikube"></a>Minikube</h3><p><a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener">Minikube</a> æ˜¯ Minikube åœ¨ Github ä¸­çš„é¡¹ç›®åœ°å€ï¼Œå¯ä»¥åœ¨ Release æ ‡ç­¾ä¸­æ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬ä¸‹è½½</p>
<blockquote>
<p>$ cd ~/Downloads<br>$ chmod +x ./minikube<br>$ mv ./minikube /usr/local/bin/minikube</p>
</blockquote>
<p>è¿™é‡Œæ˜¯ç»™ä¸‹è½½çš„ minikube åŠ ä¸Šæ‰§è¡Œæƒé™åæ”¾åˆ° /usr/local/bin é‡Œé¢ï¼Œä¹Ÿå¯ä»¥è‡ªå·±é€‰æ‹©æ”¾åœ¨ä»»æ„ PATH é‡Œ</p>
<p>ç„¶åè¿è¡Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦å®‰è£…å®Œæˆ</p>
<blockquote>
<p>$ minikube version<br>minikube version: v1.0.0</p>
</blockquote>
<p>æ­£ç¡®æ˜¾ç¤ºå‡º minikube çš„ç‰ˆæœ¬ï¼Œå®‰è£…æˆåŠŸï¼</p>
<h3 id="Kubectl"><a href="#Kubectl" class="headerlink" title="Kubectl"></a>Kubectl</h3><p>Kubectl æ˜¯ç”¨äºæ§åˆ¶ Kubernetes çš„ï¼Œå¯é€šè¿‡åŒ…ç®¡ç†ç¨‹åºå®‰è£…(Mac ç”¨ brew ï¼ŒCentos ç”¨ yumï¼ŒUbuntu ç”¨ apt)</p>
<blockquote>
<p>$ brew install kubernetes-cli<br>$ kubectl<br>kubectl controls the Kubernetes cluster manager.</p>
<p>Find more information at: <a href="https://kubernetes.io/docs/reference/kubectl/overview/" target="_blank" rel="noopener">https://kubernetes.io/docs/reference/kubectl/overview/</a><br>â€¦</p>
</blockquote>
<p>å®‰è£…æˆåŠŸï¼Œæ¥ä¸‹æ¥å¯ä»¥å‡†å¤‡å¯åŠ¨äº†</p>
<h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><blockquote>
<p>$ minikube start<br>ğŸ˜„  minikube v1.0.0 on darwin (amd64)<br>ğŸ¤¹  Downloading Kubernetes v1.14.0 images in the background â€¦<br>ğŸ’¡  Tip: Use â€˜minikube start -p <name>â€˜ to create a new cluster, or â€˜minikube deleteâ€™ to delete this one.<br>ğŸƒ  Re-using the currently running virtualbox VM for â€œminikubeâ€ â€¦<br>âŒ›  Waiting for SSH access â€¦<br>ğŸ“¶  â€œminikubeâ€ IP address is 192.168.99.104<br>ğŸ³  Configuring Docker as the container runtime â€¦<br>ğŸ³  Version of container runtime is 18.06.2-ce<br>âŒ›  Waiting for image downloads to complete â€¦<br>âœ¨  Preparing Kubernetes environment â€¦<br>ğŸšœ  Pulling images required by Kubernetes v1.14.0 â€¦<br>ğŸ”„  Relaunching Kubernetes v1.14.0 using kubeadm â€¦<br>âŒ›  Waiting for pods: apiserver proxy etcd scheduler controller dns<br>ğŸ“¯  Updating kube-proxy configuration â€¦<br>ğŸ¤”  Verifying component health â€¦..<br>ğŸ’—  kubectl is now configured to use â€œminikubeâ€<br>ğŸ„  Done! Thank you for using minikube!</name></p>
<p>$ kubectl get nodes</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554018821347-c95d911f-88cb-4a73-b226-c425a84932e8.png" alt="kubectl get pods"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ minikube å¯åŠ¨æˆåŠŸä¹‹åï¼Œç”¨ <code>kubectl get nodes</code> å¯ä»¥æˆåŠŸè·å–åˆ° nodes çš„ä¿¡æ¯ï¼Œä¸€åˆ‡æ­£å¸¸ï¼</p>
<h2 id="å†™ä¸€ä¸ªå°æœåŠ¡ï¼Œå°è¯•éƒ¨ç½²"><a href="#å†™ä¸€ä¸ªå°æœåŠ¡ï¼Œå°è¯•éƒ¨ç½²" class="headerlink" title="å†™ä¸€ä¸ªå°æœåŠ¡ï¼Œå°è¯•éƒ¨ç½²"></a>å†™ä¸€ä¸ªå°æœåŠ¡ï¼Œå°è¯•éƒ¨ç½²</h2><h3 id="Hello-World-ä»£ç "><a href="#Hello-World-ä»£ç " class="headerlink" title="Hello World ä»£ç "></a>Hello World ä»£ç </h3><p>æ­¤å¤„é‡‡ç”¨Goè¯­è¨€ï¼Œå› ä¸ºå¯ä»¥é™æ€ç¼–è¯‘ä¸”è¯­æ³•ç®€å•</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.HandleFunc(<span class="string">"/"</span>, handler)</span><br><span class="line">	fmt.Println(<span class="string">"Listening on http://localhost:8080/"</span>)</span><br><span class="line">	http.ListenAndServe(<span class="string">":8080"</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">handler</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	w.WriteHeader(http.StatusOK)</span><br><span class="line">	w.Write([]<span class="keyword">byte</span>(<span class="string">"Hello World"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>$ go run main.go<br>Listening on <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></p>
</blockquote>
<p>ç”¨æµè§ˆå™¨æ‰“å¼€ä¸Šé¢çš„ç½‘å€å¯ä»¥çœ‹åˆ°</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554013868546-bc0e4859-0672-4173-9b5b-99326c52373d.png" alt="æµè§ˆå™¨è®¿é—®"></p>
<p>æˆåŠŸè¾“å‡ºäº† Hello World</p>
<p>ä¸‹ä¸€æ­¥</p>
<h3 id="é™æ€ç¼–è¯‘"><a href="#é™æ€ç¼–è¯‘" class="headerlink" title="é™æ€ç¼–è¯‘"></a>é™æ€ç¼–è¯‘</h3><p>å¯èƒ½æœ‰äººä¼šé—®ä¼šä»€ä¹ˆè¦é™æ€ç¼–è¯‘ï¼Œä¸èƒ½ç›´æ¥ <code>go run main.go</code> å—</p>
<p>å¦‚æœç”¨ <code>go run main.go</code> æ¥å¯åŠ¨æœåŠ¡ï¼Œé‚£ä¹ˆè¿˜éœ€è¦ Go è¯­è¨€çš„å¼€å‘ç¯å¢ƒï¼Œå¦‚æœä»£ç å¤æ‚ä¸€ç‚¹è¿˜éœ€è¦å®‰è£…å„ç§ä¾èµ–åº“ï¼Œä¼šå¯¼è‡´é•œåƒè¿‡äºåºå¤§ï¼Œå› ä¸ºè¿™åªæ˜¯ä¸€ä¸ªå¾ˆå°å¾ˆç®€å•çš„ Demo ï¼Œä»…ä½œæµ‹è¯•çš„å°ç©å…·ï¼Œé™æ€ç¼–è¯‘å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶æœ€å¤§ä¸åˆ° 10MB ï¼Œè€Œä¸ºäº†ä¸ç¼–è¯‘ç›´æ¥è¿è¡Œæ‰€éœ€è¦çš„å¼€å‘ç¯å¢ƒï¼Œè‡³å°‘éƒ½æ˜¯ å‡ ç™¾MB ï¼Œæ²¡æœ‰å¿…è¦ä¸ºäº†ä¸€ä¸ªå° Demo å»æµªè´¹é‚£ä¹ˆå¤šèµ„æºï¼Œæ‰€ä»¥é€‰æ‹©é™æ€ç¼–è¯‘</p>
<blockquote>
<p>$ GOOS=linux CGO_ENABLED=0 go build -o main -ldflags â€˜-extldflags â€œ-staticâ€â€˜ main.go</p>
</blockquote>
<p>æ‰§è¡Œè¿™æ¡å‘½ä»¤åå¯ä»¥çœ‹åˆ°å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªåä¸º main çš„å¯æ‰§è¡Œæ–‡ä»¶</p>
<p>ä½†æ˜¯ä¸èƒ½æ‰§è¡Œï¼Œå› ä¸ºå½“å‰æ˜¯ MacOS ç¯å¢ƒï¼Œè€Œé™æ€ç¼–è¯‘æ—¶æŒ‡å®šçš„æ˜¯ Linux ç¯å¢ƒ</p>
<p>ps: å¦‚æœè¯»è€…æ˜¯ Linux ç¯å¢ƒå½“æˆ‘æ²¡è¯´</p>
<p>ps: å¦‚æœæœ‰è¯»è€…çœ‹ä¸æ‡‚è¿™æ¡å‘½ä»¤ï¼Œæ²¡å…³ç³»ä¸è¦æ€•ï¼Œä½ ä¸æ˜¯ä¸æ‡‚ Golang ï¼Œä½ åªæ˜¯ä¸æ‡‚ C è€Œå·²</p>
<h3 id="æ„å»º-Docker-é•œåƒ"><a href="#æ„å»º-Docker-é•œåƒ" class="headerlink" title="æ„å»º Docker é•œåƒ"></a>æ„å»º Docker é•œåƒ</h3><p>è¦æ„å»º Docker é•œåƒï¼Œæˆ‘ä»¬å…ˆå†™ä¸€ä¸ª dockerfile</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./main /main</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"/main"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>ps: scratch æ˜¯ä¸€ä¸ªç©ºçš„ Docker é•œåƒï¼Œå³ä¸ä½¿ç”¨åŸºç¡€é•œåƒçš„æ„æ€</p>
<p>å†™å¥½ Dockerfile åï¼Œåœ¨æ‰§è¡Œå‘½ä»¤æ„å»ºé•œåƒä¹‹å‰ï¼Œè¦ç¡®ä¿minikubeå·²ç»å¯åŠ¨ï¼Œå¹¶ä¸”æ‰§è¡Œä¸€å¥ç¥å¥‡çš„å‘½ä»¤å…ˆ</p>
<blockquote>
<p>$ eval $(minikube docker-env)</p>
</blockquote>
<p>åœ¨è¿™æ¡å‘½ä»¤é‡Œè—ç€æˆ‘åŠå¤©çš„å¿ƒé…¸ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« ä¼šä»”ç»†è§£é‡Šï¼Œè¿™é‡Œå…ˆä¸ä½œè§£é‡Š</p>
<p>å†æ‰§è¡Œä¸‹é¢è¿™äº›</p>
<blockquote>
<p>$ docker build -t hello:v1.0 .<br>Sending build context to Docker daemon  11.73MB<br>Step 1/3 : FROM scratch<br>â€”&gt;<br>Step 2/3 : ADD ./main /main<br>â€”&gt; 636350b5d281<br>Step 3/3 : CMD [ â€œ/mainâ€ ]<br>â€”&gt; Running in a54d3c9c3864<br>Removing intermediate container a54d3c9c3864<br>â€”&gt; 321b69c05fff<br>Successfully built 321b69c05fff<br>Successfully tagged hello:v1.0<br>$ docker images</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554018896187-c9afeaca-2042-42c8-aaf0-7ad775eb1c33.png" alt="docker images"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸåœ°æ„å»ºäº†é•œåƒï¼Œç¬”è€…è¿™é‡Œé•œåƒå¤§å°ä»…ä»…åªæœ‰ 7.34MB</p>
<h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>éƒ¨ç½²åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤</p>
<h4 id="åˆ›å»º-Deployments-å’Œ-Pods"><a href="#åˆ›å»º-Deployments-å’Œ-Pods" class="headerlink" title="åˆ›å»º Deployments å’Œ Pods"></a>åˆ›å»º Deployments å’Œ Pods</h4><blockquote>
<p>$ kubectl run hello â€“image=hello:v1.0 â€“port=8080<br>deployment.apps â€œhelloâ€ created<br>$ kubectl get deployments</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554018939941-8516aaf8-b734-40ba-9e1c-4e1d66699988.png" alt="kubectl get deployments"></p>
<blockquote>
<p>$ kubectl get pods</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554018967294-676d6ced-c2aa-4e43-8005-414c1e165a13.png" alt="kubectl get pods"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPods å·²ç»å‡†å¤‡å¥½äº†</p>
<h4 id="åˆ›å»º-Service-ä»¥ä¾›å¤–éƒ¨è®¿é—®"><a href="#åˆ›å»º-Service-ä»¥ä¾›å¤–éƒ¨è®¿é—®" class="headerlink" title="åˆ›å»º Service ä»¥ä¾›å¤–éƒ¨è®¿é—®"></a>åˆ›å»º Service ä»¥ä¾›å¤–éƒ¨è®¿é—®</h4><blockquote>
<p>$ kubectl expose deployment hello â€“port=8080 â€“type=NodePort<br>service â€œhelloâ€ exposed<br>$ kubectl get services</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554018998759-1009c3b7-d614-4b01-85fe-6a23fe758bdc.png" alt="kubectl get services"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œservice å·²ç»åˆ›å»ºæˆåŠŸï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹ service çš„ ip å’Œç«¯å£</p>
<p>ps: ipå’Œç«¯å£ä»¥è‡ªå·±æ‰§è¡Œå‘½ä»¤åè¾“å‡ºçš„ä¸ºå‡†</p>
<blockquote>
<p>$ minikube service hello â€“url<br><a href="http://192.168.99.104:31537" target="_blank" rel="noopener">http://192.168.99.104:31537</a><br>$ curl <a href="http://192.168.99.104:31537" target="_blank" rel="noopener">http://192.168.99.104:31537</a><br>Hello World</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554017653231-56204059-016c-485a-bd07-7c6d3e6ce782.png" alt="æµè§ˆå™¨è®¿é—®"></p>
<p>ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡º Hello Worldï¼Œéƒ¨ç½²ä¸€åˆ‡æ­£å¸¸ï¼</p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>åœ¨éƒ¨ç½²çš„è¿‡ç¨‹ä¸­å…¶å®é‡åˆ°äº†å¾ˆå¤šå›°éš¾ï¼Œæˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„ä¸€ç¯‡æ–‡ç« ä¸­è¯¦ç»†è¯´æ˜ï¼Œå¦‚æœæœ‰é‡åˆ°ç›¸åŒå›°éš¾çš„æœ‹å‹å¯ä»¥å‚è€ƒå‚è€ƒ</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:rfsx0829@163.com">Guu Zeng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://rfsx.bugzeng.com/2019/3310.html">http://rfsx.bugzeng.com/2019/3310.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://rfsx.bugzeng.com">Guu's Blog</a>ï¼</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Kubernetes/">Kubernetes</a><a class="post-meta__tags" href="/tags/æ–°å¼€å§‹/">æ–°å¼€å§‹</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/3311.html"><i class="fa fa-chevron-left">  </i><span>åˆæ¢ Kubernetesï¼ˆäºŒï¼‰</span></a></div><div class="next-post pull-right"><a href="/2019/323.html"><span>æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'b461fe440fe09abd038f',
  clientSecret: 'ce376c31953bb9faa0febf2771e673baf191f2a3',
  repo: 'rfsx0829.github.io',
  owner: 'rfsx0829',
  admin: 'rfsx0829',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(/img/top.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Guu Zeng</div><div class="footer_custom_text">Hi, welcome to my blog !</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>