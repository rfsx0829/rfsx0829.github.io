<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="↑ 只会写 HelloWorld"><meta name="keywords" content><meta name="author" content="Guu Zeng,rfsx0829@163.com"><meta name="copyright" content="Guu Zeng"><title>如果你也喜欢编程，可以交个朋友哦 | Guu's Blog</title><link rel="shortcut icon" href="/favicon.png"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.gif"></div><div class="author-info__name text-center">Guu Zeng</div><div class="author-info__description text-center">↑ 只会写 HelloWorld</div><div class="follow-button"><a href="https://github.com/rfsx0829">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">9</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">15</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://bugzeng.com">bugzeng</a><a class="author-info-links__name text-center" href="https://yhyddr.github.io">abser</a></div></div></div><nav id="nav" style="background-image: url(/img/top.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Guu's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/about">关于</a></span></div><div id="site-info"><div id="site-title">Guu's Blog</div><div id="site-sub-title">如果你也喜欢编程，可以交个朋友哦</div><div id="site-social-icons"><a class="social-icon" href="https://github.com/rfsx0829"><i class="fa-github fa"></i></a><a class="social-icon search"><i class="fa fa-search"></i></a></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/4211.html">读书句子收集</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/收集/">收集</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/小结/">小结</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Reading/">Reading</a></span><div class="content"><h1 id="觉得好的句子，就收集在这里吧"><a href="#觉得好的句子，就收集在这里吧" class="headerlink" title="觉得好的句子，就收集在这里吧"></a>觉得好的句子，就收集在这里吧</h1><p>虽然自己在每天的日记里也会记录一些句子，这里就不把那些搬运过来，日记里记录短句，这里记录长句吧</p>
<h2 id="周总结一"><a href="#周总结一" class="headerlink" title="周总结一"></a>周总结一</h2><h3 id="《共产党宣言》"><a href="#《共产党宣言》" class="headerlink" title="《共产党宣言》"></a>《共产党宣言》</h3><blockquote>
<ol>
<li>现代的工人只有当他们找到工作的时候才能生存，而且只有当他们的劳动增值资本的时候才能找到工作</li>
<li>由于推广机器和分工，无产者的劳动已经失去了任何独立的性质，因而对工人也失去了任何吸引力。工人变成了机器的单纯的附属品，要求他做的只是极其简单，极其单调和极容易学会的操作。因此，花在工人身上的费用，几乎只限于维持工人生活和延续工人后代所必需的生活资料。但是，商品的价格，从而劳动的价格，是同它的生产费用相等的。因此，劳动越使人感到厌恶，工资也就越减少。</li>
<li>现代工业已经把家长式的师傅的小作坊变成了工业资本家的大工厂。挤在工厂里的工人群众就像士兵一样被组织起来。他们是产业军的普通士兵，受着各级军士和军官的层层监视。他们不仅仅是资产阶级的，资产阶级国家的奴隶，他们每日每时都受机器，受监工，首先是受各个经营工厂的资产者本人的奴隶。这种专制制度越是公开地把营利宣布为自己的最终目的，它就越是可鄙，可恨和可恶。</li>
<li>手的操作所要求的技巧和气力越少，换句话说，现代工业越发达，男工也就越受到女工和童工的排挤。对工人阶级来说，性别和年龄的差别再没有什么社会意义了。他们都只是劳动工具，不过因为年龄和性别的不同而需要不同的费用罢了。</li>
</ol>
</blockquote>
<h3 id="《毛泽东选集》卷一"><a href="#《毛泽东选集》卷一" class="headerlink" title="《毛泽东选集》卷一"></a>《毛泽东选集》卷一</h3><blockquote>
<ol>
<li>他们觉得现在如果只使用和从前相等的劳动，就会不能维持生活。必须增加劳动时间，每天起早散晚，对于职业加倍注意，方能维持生活。</li>
<li>这派议论貌似有理，其实也是错的。第一，上述那些事，都是土豪劣绅，不法地主自己逼出来的。土豪劣绅，不法地主，历来凭借实力称霸，践踏农民，农民才有这种很大的反抗。凡是反抗最力，乱子闹得最大的地方，都是土豪劣绅，不法地主为恶最甚的地方。农民的眼睛，全然没有错的。谁个劣，谁个不劣，谁个最甚，谁个稍次，谁个惩办要严，谁个处罚从轻，农民都有极明白的计算，罚不当罪的极少。第二，革命不是请客吃饭，不是做文章，不是绘画绣花，不能那样雅致，那样从容不迫，文质彬彬，那样温良恭俭让。革命是暴动，是一个阶级推翻一个阶级的暴烈的行动。</li>
<li>矫枉必须过正，不过正不能矫枉。</li>
<li>以前土豪劣绅的残忍，土豪劣绅造成的农村白色恐怖是这样，现在农民起来枪毙几个土豪劣绅，造成一点小小的镇压反革命派的恐怖现象，有什么理由说不应该？</li>
<li>封建时代独裁专断的恶习惯深中于群众乃至党员的头脑中，一时扫除不净，遇事贪图便利，不喜欢麻烦的民主制度。</li>
<li>本位主义，一切只知道为四军打算，不知道武装地方群众是红军的重要任务之一。这是一种放大了的小团体主义。</li>
<li>有少数同志囿于四军的局部环境，以为除此就没有别的革命势力了。因此，保存实力，避免斗争的思想非常浓厚。这是机会主义的残余。</li>
<li>不顾主客观条件，犯着革命的急性病，不愿意艰苦地做细小严密的群众工作，只想大干，充满着幻想。这是盲动主义的残余。</li>
</ol>
</blockquote>
<h3 id="《在路上》"><a href="#《在路上》" class="headerlink" title="《在路上》"></a>《在路上》</h3><p>本来这本里也是有很多好句子的，但几乎都是短句，就不记录了</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/4210.html">每周总结(一)</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/每周总结/">每周总结</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/weekly/">weekly</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/小结/">小结</a></span><div class="content"><h1 id="周记一"><a href="#周记一" class="headerlink" title="周记一"></a>周记一</h1><h2 id="絮叨"><a href="#絮叨" class="headerlink" title="絮叨"></a>絮叨</h2><p>这是第一次写每周总结，没有什么经验，那就想到什么写什么</p>
<h2 id="做事"><a href="#做事" class="headerlink" title="做事"></a>做事</h2><ol>
<li>上课满勤，一节都没逃过，但是偶尔课上打盹</li>
<li>每天坚持锻炼，5 公里 + 30 * 3 俯卧撑 + 30 * 3 仰卧起坐</li>
<li>买了很多书籍并开始阅读，包括《毛选》共五卷，《共产党宣言》，《密码学》，架构方面两本，预计一到两个月读完</li>
<li>理发，寸头，非常清爽</li>
</ol>
<h2 id="收获"><a href="#收获" class="headerlink" title="收获"></a>收获</h2><p>我在考虑这个部分，应该怎么来作记录呢</p>
<p>按照上面做事的分店讲，还是分类别讲</p>
<p>还是分类别吧，觉得受上一节点约束很奇怪</p>
<h3 id="读书记录的句子"><a href="#读书记录的句子" class="headerlink" title="读书记录的句子"></a>读书记录的句子</h3><p>如果直接写在这里的话，恐怕内容太多导致头重脚轻了，就单独放在另一篇博客里吧，这里放个链接</p>
<p><a href="http://rfsx.bugzeng.com/2019/4211.html">读书句子收集</a></p>
<h3 id="自己的代码"><a href="#自己的代码" class="headerlink" title="自己的代码"></a>自己的代码</h3><p>本周新起了一个项目，是关于 RSS 的，可见于 <a href="http://rfsx.bugzeng.com/2019/418.html">RSS</a></p>
<p>因为项目刚起步，也没什么好记录的，具体进度可见于我在 GitHub 上的 <a href="https://github.com/rfsx0829/rss" target="_blank" rel="noopener">Repo</a></p>
<h3 id="强大的工具收集"><a href="#强大的工具收集" class="headerlink" title="强大的工具收集"></a>强大的工具收集</h3><p><a href="https://github.com/uber-go/dig" target="_blank" rel="noopener">dig</a></p>
<p>这是Go语言的一个依赖注入工具，基于反射实现的</p>
<p>设计得非常巧妙，我正在进行这个工具的源码阅读，预计不久后会专门写一篇博客来分析一下它的源码和基本原理，并写一些示例</p>
<p>ps: 其实原理我都知道一点了，拓扑排序嘛</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>因为刚开始做博客，很多东西都不熟悉，在内容输出上也很无力，更新会很慢</p>
<p>总之 多读书，多坚持 就完事儿了</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/418.html">关于 RSS</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-18</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Projects/">Projects</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/RSS/">RSS</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/APP/">APP</a></span><div class="content"><h1 id="关于-RSS"><a href="#关于-RSS" class="headerlink" title="关于 RSS"></a>关于 RSS</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>刚才突然想了很多事情，突然想到之前在日记中有提到，每周要写总结，并且放到博客上。</p>
<p>所以，这周的总结，肯定是有的，但因为刚开始，内容可能会非常贫乏，还在摸索道路</p>
<p>又想到之前我BOSS一年前提到的，关于rss的东西，那时候我刚入门，他让我做一个这方面的应用，但当时的我水平还不足以做到，现在来试试</p>
<p>所以，这篇文章来讲讲关于RSS的东西，并且我自己又建了一个代码库，尽量完成这个项目</p>
<h2 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a>RSS</h2><p>RSS 即 Really Simple Syndication 简易信息聚合，其实就是一个 信息源</p>
<p>那么这个项目具体要做什么呢，做一个 RSS 阅读器，虽然已经有很多现成的阅读器了，但我还是要做，因为。。。算是弥补一下以前没能做成这个项目的遗憾吧</p>
<p>可能还是有读者不理解什么叫做rss，没事，等这篇文章有除我之外的其他读者的时候，可能我这个项目早就做好最初版本了哈，到时候你们自己下载来玩玩就知道了</p>
<h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><p>这里是项目的链接 <a href="https://github.com/rfsx0829/rss" target="_blank" rel="noopener">rss reader</a></p>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>因为这篇文章只是讲一下我要做一个这个项目，实际还没有动工，那么在这里就可以展望一下这个项目需要有什么功能</p>
<h3 id="功能展望"><a href="#功能展望" class="headerlink" title="功能展望"></a>功能展望</h3><ol>
<li>阅读聚合消息</li>
<li>添加，删除源</li>
<li>优质源推荐</li>
</ol>
<p>暂定这三个基础功能吧，高级功能后期再添加</p>
<h3 id="项目形式"><a href="#项目形式" class="headerlink" title="项目形式"></a>项目形式</h3><p>暂定 Golang 后台 + Flutter APP ，等这两个都完工可以考虑再做一个 Web 前端</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/414.html">RESTful 架构</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Architecture/">Architecture</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/架构/">架构</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Architecture/">Architecture</a></span><div class="content"><h1 id="RESTful-架构"><a href="#RESTful-架构" class="headerlink" title="RESTful 架构"></a>RESTful 架构</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>所谓 REST，即是 Resources Representational State Transfer 的缩写，即 资源表现层状态转化</p>
<p>具体怎么理解，我看了 阮一峰 大神的博客，<a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">点击这里查看文章</a>，我觉得解释得很清楚</p>
<p>那为什么还要写这篇博客呢，我是想记录一下自己的感受和见解</p>
<h2 id="最初的理解"><a href="#最初的理解" class="headerlink" title="最初的理解"></a>最初的理解</h2><p>最早看到 RESTful 这个词，还是在以前学 Nodejs 的时候，看 Eggjs 框架，文档中有提到这个概念，但是当时一点都不懂，也没有查资料，以自己粗浅的知识瞎猜了一个意思</p>
<p>我当时以为 Router 以 URL.Path 调度 Controller 的过程中，每一级的 Controller 和 Path 的名字要一一对应，这个叫做 RESTful 架构，但是现在想想觉得好蠢啊。。</p>
<h2 id="真正的-RESTful-架构"><a href="#真正的-RESTful-架构" class="headerlink" title="真正的 RESTful 架构"></a>真正的 RESTful 架构</h2><p>阮老师 的博客中已经解释得很清楚了，我再小结一下，也免得自己忘记掉</p>
<ol>
<li>资源本身无类型，表现层是什么样取决于需求，就像是 C 语言的内存数据一样，数据本身不会变，表现为什么类型只取决于需求什么类型，所以要注意 Header 中的 Content-Type 哦</li>
<li>URL.Path 中不能出现动词，应该是分级的名词，版本号也不应出现，要进行的操作应以 Http.Method 来区分</li>
<li>增删查改 分别对应 POST DELETE GET POST</li>
</ol>
<p>当有这些总结之后，再回头看看之前写的那些东西，真的是没眼看</p>
<blockquote>
<p>/api/v1/article/add</p>
</blockquote>
<p>真是不知道之前怎么能写成这样，这是一次性犯了多少错啊。。。</p>
<p>所以看了看 RESTful 对自己的提升还是很多的，又要开始重构很多代码了</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/409.html">C语言实现简单Shell</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-09</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/读书笔记/">读书笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/C/">C</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Shell/">Shell</a></span><div class="content"><h1 id="C-语言实现简单-Shell"><a href="#C-语言实现简单-Shell" class="headerlink" title="C 语言实现简单 Shell"></a>C 语言实现简单 Shell</h1><h2 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXLINE 1024</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">main(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">char</span>  buf[MAXLINE];</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span>   status;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%% "</span>);</span><br><span class="line">    <span class="keyword">while</span>(fgets(buf, MAXLINE, <span class="built_in">stdin</span>) != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(buf[<span class="built_in">strlen</span>(buf) - <span class="number">1</span>] == <span class="string">'\n'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            buf[<span class="built_in">strlen</span>(buf) - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>((pid = fork()) &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Fork Error !\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            execlp(buf, buf, (<span class="keyword">char</span>*)<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>((pid = waitpid(pid, &amp;status, <span class="number">0</span>)) &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Wait Error !\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%% "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体的原理很简单，循环从标准输入读取命令，读取到之后调用系统函数 execlp 执行命令。</p>
<h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p>但是这样其实只能实现无参数调用，如果加参数就会产生错误，像这样</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554896522521-bd50a48e-0eef-43ad-9cb2-4a7d9f3744e2.png" alt="image.png"></p>
<p>那么想办法来改进一下</p>
<h2 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h2><p>注意到 其实在调用 exec 系列函数是可以传数组参数的，其中有一个</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>	<span class="title">execvp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * __file, <span class="keyword">char</span> * <span class="keyword">const</span> * __argv)</span></span>;</span><br></pre></td></tr></table></figure>
<p>于是，这样来改进程序</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXLINE 1024</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">main(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">char</span>  buf[MAXLINE];</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span>   status;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%% "</span>);</span><br><span class="line">    <span class="keyword">while</span>(fgets(buf, MAXLINE, <span class="built_in">stdin</span>) != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(buf);</span><br><span class="line">        <span class="keyword">char</span>* argv[<span class="number">10</span>] = &#123;<span class="literal">NULL</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> args = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(buf[len - <span class="number">1</span>] == <span class="string">'\n'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            buf[len - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 将读取到的字符串，解析成参数的数组保存在 argv 中，再传给 execlp</span></span><br><span class="line">        argv[args] = (<span class="keyword">char</span>*)buf;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(buf[i] == <span class="string">' '</span> &amp;&amp; buf[i+<span class="number">1</span>] != <span class="string">' '</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                buf[i] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(buf[i+<span class="number">1</span>] != <span class="string">' '</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    argv[++args] = (<span class="keyword">char</span>*)(buf + i+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// fork 函数 一次调用两次返回，对父进程返回子进程的 pid ，对子进程返回 0，如果返回值小于 0 则表示有错误</span></span><br><span class="line">        <span class="keyword">if</span>((pid = fork()) &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Fork Error !\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            execvp(argv[<span class="number">0</span>], argv);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>((pid = waitpid(pid, &amp;status, <span class="number">0</span>)) &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Wait Error !\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%% "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="再演示"><a href="#再演示" class="headerlink" title="再演示"></a>再演示</h2><p>看看改进后的效果，是否可以支持加参数了</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554900459904-1e5d6fa6-5ef1-4357-a386-fa1920853ee4.png" alt="image.png"></p>
<p>就可以支持参数了，很好嗷</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/406.html">Flutter 问题一记</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Flutter/">Flutter</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Flutter/">Flutter</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/小问题/">小问题</a></span><div class="content"><h1 id="Flutter-环境配置的小问题"><a href="#Flutter-环境配置的小问题" class="headerlink" title="Flutter 环境配置的小问题"></a>Flutter 环境配置的小问题</h1><p>因为之前重置过 Mac 一次，导致我的 Flutter 开发环境没有了，又得重新配置环境，而这个过程，真的是让我很头大，我觉得这甚至可以写进博客，这里可以稍微记录下大体的思路</p>
<h2 id="下载-Flutter-并添加-bin-到-PATH"><a href="#下载-Flutter-并添加-bin-到-PATH" class="headerlink" title="下载 Flutter 并添加 bin 到 PATH"></a>下载 Flutter 并添加 bin 到 PATH</h2><p>这一步倒是没什么问题，轻车熟路的，一下子就搞定了</p>
<h2 id="配置-Android-SDK"><a href="#配置-Android-SDK" class="headerlink" title="配置 Android SDK"></a>配置 Android SDK</h2><p>这是最烦的，在这里耗费了不知道多少时间和好心情</p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>第一个问题，下载，本来没什么难度，但是。。。</p>
<p>在 Flutter 的官方文档上有这么一个 Note</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/162233/1554481707317-e938bb0a-666c-48fb-970e-eb7592538ce5.png" alt="Note"></p>
<p>翻译一下：Flutter <strong>依赖一个 Android Studio 的完整安装</strong> 来支持它对 Android 平台的依赖，然而，你可以在很多编辑器里写你的 Flutter 应用</p>
<p>官网说需要一个完整的安装。。但我记得之前好像没有装 Android Studio 也能用啊，这次怎么回事</p>
<p>那。。到底是下载完整的 Android Studio 呢还是只下载 Command Line Tool 呢</p>
<p>我选择了后者</p>
<h3 id="Flutter-doctor"><a href="#Flutter-doctor" class="headerlink" title="Flutter doctor"></a>Flutter doctor</h3><p>Flutter 不认 Android SDK，始终说缺一个 platforms 文件夹，才知道原来这是可以通过 sdkmanager 安装的，于是 执行 sdkmanager 试试，得到了报错。。。网上一查。。。是Java的问题</p>
<h3 id="Java-版本冲突"><a href="#Java-版本冲突" class="headerlink" title="Java 版本冲突"></a>Java 版本冲突</h3><p>网上查了很久才知道，原来 sdkmanager 只支持 JDK 10 及以下的，但是我之前。。。刚装了 JDK 12。。</p>
<p>于是，卸载，装 JDK 8</p>
<p>ps： 为什么是 JDK 8 不是 JDK 10 ？</p>
<p>ps： 因为 JDK8 可以直接支持 sdkmanager，9 和 10 还要去加环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_OPTS=<span class="string">'-XX:+IgnoreUnrecognizedVMOptions --add-modules java.se.ee'</span></span><br></pre></td></tr></table></figure>
<h3 id="Java-解决方案"><a href="#Java-解决方案" class="headerlink" title="Java 解决方案"></a>Java 解决方案</h3><ol>
<li>JDK 8 及以下，可直接使用 sdkmanager 安装 Android SDK</li>
<li>JDK 9 和 JDK 10，需添加环境变量让 sdkmanager 能找到那个模块，然后再正常使用</li>
<li>JDK 11 和 JDK 12，添加环境变量无作用，因为。。那个包被移除了。。只能装低版本。。。</li>
</ol>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p>最后的，其实挺简单，通过 sdkmanager 安装好 platforms 和 build-tools 之后，添加一个 ANDROID_HOME  就完事了，再执行 flutter doctor 看看，应该就可以识别 SDK 了</p>
<p>ps：可能还会有证书问题，这个 flutter 给了提示，按提示来可以手动确认证书</p>
<h2 id="手机"><a href="#手机" class="headerlink" title="手机"></a>手机</h2><p>电脑环境倒是配置好了，手机又出问题了，之前在玩 Island，但似乎它的权限有点过大了，居然把 Android 调试给劫持了，把这个软件里面的一个功能关掉才能正常连接电脑。。。</p>
<p>然后几分钟后，手机疯狂死机重启。。。</p>
<p>然后就重装了 Pixel Experience CAF</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>深夜了，环境终于全部搞完，我的三天假期就只剩下两天来做开发，一天都被配这个环境给浪费掉了，从心说一句，垃圾 Java ！自己都不向下兼容，你开发**呢</p>
</div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(/img/top.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Guu Zeng</div><div class="footer_custom_text">Hi, welcome to my blog !</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>